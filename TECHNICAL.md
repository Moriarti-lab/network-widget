# üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤
```
NetworkWidget/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ src/main/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ java/com/minimaxagent/networkwidget/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NetworkWidgetProvider.java      # –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä –≤–∏–¥–∂–µ—Ç–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ MainActivity.java               # –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ res/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ widget_layout.xml           # –ú–∞–∫–µ—Ç –≤–∏–¥–∂–µ—Ç–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ activity_main.xml           # –ú–∞–∫–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ xml/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ network_widget_info.xml     # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∏–¥–∂–µ—Ç–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ drawable/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ widget_background.xml       # –§–æ–Ω –≤–∏–¥–∂–µ—Ç–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ button_background.xml       # –§–æ–Ω –∫–Ω–æ–ø–æ–∫
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ic_network_connected.xml    # –ò–∫–æ–Ω–∫–∞ —Å–µ—Ç–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ values/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ strings.xml                 # –°—Ç—Ä–æ–∫–æ–≤—ã–µ —Ä–µ—Å—É—Ä—Å—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ colors.xml                  # –¶–≤–µ—Ç–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ styles.xml                  # –°—Ç–∏–ª–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ arrays.xml                  # –ú–∞—Å—Å–∏–≤—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AndroidManifest.xml             # –ú–∞–Ω–∏—Ñ–µ—Å—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ build.gradle                            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–¥—É–ª—è
‚îú‚îÄ‚îÄ build.gradle                                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ settings.gradle                             # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Gradle
‚îú‚îÄ‚îÄ gradle.properties                           # –°–≤–æ–π—Å—Ç–≤–∞ Gradle
‚îú‚îÄ‚îÄ README.md                                   # –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ QUICK_SETUP.md                              # –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
```

## –ö–ª—é—á–µ–≤—ã–µ –∫–ª–∞—Å—Å—ã

### NetworkWidgetProvider
```java
public class NetworkWidgetProvider extends AppWidgetProvider
```

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- `onUpdate()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–∞
- `onReceive()` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–µ–π—Å—Ç–≤–∏–π
- `toggleAirplaneMode()` - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –ø–æ–ª–µ—Ç–∞
- `openEngineeringMode()` - –æ—Ç–∫—Ä—ã—Ç–∏–µ –∏–Ω–∂–µ–Ω–µ—Ä–Ω–æ–≥–æ –º–µ–Ω—é
- `switchNetworkMode()` - —Å–º–µ–Ω–∞ —Ç–∏–ø–∞ —Å–µ—Ç–∏
- `updateWidget()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –≤–∏–¥–∂–µ—Ç–∞

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:**
- `ACTION_TOGGLE_AIRPLANE_MODE` - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –ø–æ–ª–µ—Ç–∞
- `ACTION_OPEN_ENGINEERING_MODE` - –æ—Ç–∫—Ä—ã—Ç–∏–µ –∏–Ω–∂–µ–Ω–µ—Ä–Ω–æ–≥–æ –º–µ–Ω—é
- `ACTION_SWITCH_NETWORK_MODE` - —Å–º–µ–Ω–∞ —Å–µ—Ç–µ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞
- `ACTION_REFRESH_STATUS` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞

### –°–µ—Ç–µ–≤—ã–µ —Ä–µ–∂–∏–º—ã
```java
private static final String[] NETWORK_MODES = {
    "LTE Only",           // 14
    "GSM/WCDMA/LTE(PRL)", // 12
    "GSM Only",           // 1
    "WCDMA Only",         // 2
    "Auto (PRL)"          // 0
};
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∏–¥–∂–µ—Ç–∞

### –†–∞–∑–º–µ—Ä—ã –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
```xml
<appwidget-provider
    android:minWidth="160dp"          <!-- 2 —è—á–µ–π–∫–∏ -->
    android:minHeight="110dp"         <!-- 2 —è—á–µ–π–∫–∏ -->
    android:resizeMode="horizontal|vertical"
    android:updatePeriodMillis="1800000"  <!-- 30 –º–∏–Ω—É—Ç -->
    android:targetCellWidth="2"
    android:targetCellHeight="2"
    android:widgetCategory="home_screen|keyguard" />
```

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤–∏–¥–∂–µ—Ç–∞
- **–°—Ç–∞—Ç—É—Å–Ω–∞—è –æ–±–ª–∞—Å—Ç—å** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–∏–ø —Å–µ—Ç–∏ –∏ –∏–∫–æ–Ω–∫—É
- **–ö–Ω–æ–ø–∫–∞ —Ä–µ–∂–∏–º–∞ –ø–æ–ª–µ—Ç–∞** - –±—ã—Å—Ç—Ä–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ
- **–ö–Ω–æ–ø–∫–∞ –∏–Ω–∂–µ–Ω–µ—Ä–Ω–æ–≥–æ –º–µ–Ω—é** - –æ—Ç–∫—Ä—ã—Ç–∏–µ —Å–∫—Ä—ã—Ç—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
- **–ö–Ω–æ–ø–∫–∞ —Å–º–µ–Ω—ã —Å–µ—Ç–∏** - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ —Å–µ—Ç–∏

## API –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ API
```java
// –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
Settings.Global.putInt(context.getContentResolver(), 
    Settings.Global.AIRPLANE_MODE_ON, value);

// –°–µ—Ç–µ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
NetworkInfo activeNetwork = cm.getActiveNetworkInfo();

// –¢–µ–ª–µ—Ñ–æ–Ω–∏—è
TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
```

### –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
```xml
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.WRITE_SECURE_SETTINGS" />
<uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW" />
<uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
```

## –ú–µ—Ç–æ–¥—ã –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Å–µ—Ç–µ–π

### 1. –†–µ—Ñ–ª–µ–∫—Å–∏—è (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç)
```java
private void setNetworkMode(int networkMode) {
    try {
        TelephonyManager telephonyManager = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
        Class<?> telephonyManagerClass = Class.forName(telephonyManager.getClass().getName());
        
        Method getITelephonyMethod = telephonyManagerClass.getDeclaredMethod("getITelephony");
        getITelephonyMethod.setAccessible(true);
        
        Object stub = getITelephonyMethod.invoke(telephonyManager);
        Class<?> iTelephonyClass = Class.forName(stub.getClass().getName());
        
        Method setPreferredNetworkType = iTelephonyClass.getMethod("setPreferredNetworkType", int.class);
        setPreferredNetworkType.invoke(stub, networkMode);
        
    } catch (Exception e) {
        Log.w(TAG, "–ù–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ç–µ–≤–æ–π —Ä–µ–∂–∏–º", e);
    }
}
```

### 2. USSD –∫–æ–º–∞–Ω–¥—ã (–¥–ª—è –∏–Ω–∂–µ–Ω–µ—Ä–Ω–æ–≥–æ –º–µ–Ω—é)
```java
private void openEngineeringMode(Context context) {
    try {
        Intent intent = new Intent(Intent.ACTION_DIAL);
        intent.setData(Uri.parse("tel:*#*#4636#*#*"));
        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(intent);
    } catch (Exception e) {
        Log.e(TAG, "–û—à–∏–±–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –∏–Ω–∂–µ–Ω–µ—Ä–Ω–æ–≥–æ –º–µ–Ω—é", e);
    }
}
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —Å–µ—Ç–∏
```java
private String getCurrentNetworkInfo(Context context) {
    ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo activeNetwork = cm.getActiveNetworkInfo();
    
    if (activeNetwork == null) return "–ù–µ—Ç —Å–µ—Ç–∏";
    
    String type = activeNetwork.getTypeName();
    String subtype = activeNetwork.getSubtypeName();
    
    if (type.equals("WIFI")) {
        return "WiFi";
    } else if (type.equals("MOBILE")) {
        if (subtype.contains("LTE")) {
            return "4G LTE";
        } else if (subtype.contains("3G")) {
            return "3G";
        } else if (subtype.contains("2G")) {
            return "2G";
        } else {
            return "–ú–æ–±–∏–ª—å–Ω–∞—è";
        }
    }
    
    return type;
}
```

### –†–µ–∂–∏–º –ø–æ–ª–µ—Ç–∞
```java
private boolean isAirplaneModeOn(Context context) {
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR1) {
        return Settings.Global.getInt(
            context.getContentResolver(),
            Settings.Global.AIRPLANE_MODE_ON,
            0
        ) == 1;
    } else {
        return Settings.System.getInt(
            context.getContentResolver(),
            Settings.System.AIRPLANE_MODE_ON,
            0
        ) == 1;
    }
}
```

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
```java
private static final String TAG = "NetworkWidgetProvider";

// –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
Log.d(TAG, "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–∞");
Log.d(TAG, "–ü–æ–ª—É—á–µ–Ω–æ –¥–µ–π—Å—Ç–≤–∏–µ: " + action);

// –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
Log.w(TAG, "–ù–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ç–µ–≤–æ–π —Ä–µ–∂–∏–º", e);
Log.w(TAG, "–ù–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ç–µ–≤–æ–π —Ä–µ–∂–∏–º", e);

// –û—à–∏–±–∫–∏
Log.e(TAG, "–û—à–∏–±–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞ –ø–æ–ª–µ—Ç–∞", e);
Log.e(TAG, "–û—à–∏–±–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –∏–Ω–∂–µ–Ω–µ—Ä–Ω–æ–≥–æ –º–µ–Ω—é", e);
```

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **API Level:** 24 (Android 7.0)
- **Target API:** 34 (Android 14)
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** arm64-v8a, armeabi-v7a, x86_64

### –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- ‚úÖ Samsung Galaxy S21+ (One UI)
- ‚úÖ OnePlus 9 Pro (OxygenOS)
- ‚úÖ Google Pixel 6 (Stock Android)
- ‚ö†Ô∏è Xiaomi (MIUI) - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- ‚ùå Huawei (EMUI) - –∏–Ω–∂–µ–Ω–µ—Ä–Ω–æ–µ –º–µ–Ω—é –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö —Ä–µ–∂–∏–º–æ–≤
1. –û–±–Ω–æ–≤–∏—Ç–µ –º–∞—Å—Å–∏–≤ `NETWORK_MODES`
2. –î–æ–±–∞–≤—å—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ `NETWORK_MODE_VALUES`
3. –û–±–Ω–æ–≤–∏—Ç–µ –º–µ—Ç–æ–¥ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–µ—Ç–µ–≤–æ–≥–æ —Ç–∏–ø–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–Ω–æ–ø–æ–∫
1. –û–±–Ω–æ–≤–∏—Ç–µ –º–∞–∫–µ—Ç `widget_layout.xml`
2. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –≤ `NetworkWidgetProvider`
3. –û–±–Ω–æ–≤–∏—Ç–µ –º–µ—Ç–æ–¥ `setupButtonListeners()`

---

*–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ—Ç MiniMax Agent*